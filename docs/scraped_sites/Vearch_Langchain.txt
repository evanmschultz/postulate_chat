IntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by provider Callbacks Chat models Chat loaders Document loaders Document transformers LLMs Memory Retrievers Text embedding models Agents & Toolkits Tools Vector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZilliz Activeloop Deep Lake Alibaba Cloud OpenSearch AnalyticDB Annoy Atlas AwaDB Azure Cognitive Search BagelDB Cassandra Chroma ClickHouse DashVector Dingo DocArray HnswSearch DocArray InMemorySearch Elasticsearch Epsilla Faiss Hologres LanceDB Marqo Google Vertex AI MatchingEngine Meilisearch Milvus MongoDB Atlas MyScale Neo4j Vector Index NucliaDB OpenSearch Postgres Embedding PGVector Pinecone Qdrant Redis Rockset ScaNN SingleStoreDB scikit-learn sqlite-vss StarRocks Supabase (Postgres) Tair Tencent Cloud VectorDB Tigris Typesense USearch vearch Vectara Weaviate Xata Zep Zilliz Grouped by provider  Integrations Vector stores vearch RecursiveCharacterTextSplitter VearchDb TextLoader PromptTemplate RetrievalQA HuggingFaceEmbeddings Discord Twitter Python JS/TS Homepage Blog Skip to main contentü¶úÔ∏èüîó LangChainDocsUse casesIntegrationsAPILangSmithJS/TS DocsCTRLKIntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by providerIntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectaraCommunityDiscordTwitterGitHubPythonJS/TSMoreHomepageBlogCopyright ¬© 2023 LangChain, Inc. Skip to main content ü¶úÔ∏èüîó LangChainDocsUse casesIntegrationsAPILangSmithJS/TS DocsCTRLK ü¶úÔ∏èüîó LangChainDocsUse casesIntegrationsAPI LangSmithJS/TS DocsCTRLK  CTRLK CTRLK  CTRLK   IntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by providerIntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara IntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by providerIntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara IntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by provider IntegrationsCallbacksChat modelsChat loadersDocument loadersDocument transformersLLMsMemoryRetrieversText embedding modelsAgents & ToolkitsToolsVector storesActiveloop Deep LakeAlibaba Cloud OpenSearchAnalyticDBAnnoyAtlasAwaDBAzure Cognitive SearchBagelDBCassandraChromaClickHouseDashVectorDingoDocArray HnswSearchDocArray InMemorySearchElasticsearchEpsillaFaissHologresLanceDBMarqoGoogle Vertex AI MatchingEngineMeilisearchMilvusMongoDB AtlasMyScaleNeo4j Vector IndexNucliaDBOpenSearchPostgres EmbeddingPGVectorPineconeQdrantRedisRocksetScaNNSingleStoreDBscikit-learnsqlite-vssStarRocksSupabase (Postgres)TairTencent Cloud VectorDBTigrisTypesenseUSearchvearchVectaraWeaviateXataZepZillizGrouped by provider Integrations Callbacks Chat models Chat loaders Document loaders Document transformers LLMs Memory Retrievers Text embedding models Agents & Toolkits Tools Vector stores Grouped by provider IntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara IntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara IntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara IntegrationsVector storesvearchvearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}PreviousUSearchNextVectara vearchimport os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings    /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")    Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ    # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)    INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda#first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']    res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ    query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")    Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ    ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)    delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})} import os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0) import os, sys, torchfrom transformers import AutoTokenizer, AutoModelForCausalLM, AutoModelfrom langchain import HuggingFacePipeline, ConversationChainfrom langchain.text_splitter import RecursiveCharacterTextSplitterfrom langchain.vectorstores.vearch import VearchDbfrom langchain.document_loaders import TextLoaderfrom langchain.prompts import PromptTemplatefrom langchain.chains import RetrievalQAfrom langchain.embeddings.huggingface import HuggingFaceEmbeddings# your local model pathmodel_path ="/data/zhx/zhx/langchain-ChatGLM_new/chatglm2-6b"  tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)model = AutoModel.from_pretrained(model_path, trust_remote_code=True).half().cuda(0)  API Reference:RecursiveCharacterTextSplitterVearchDbTextLoaderPromptTemplateRetrievalQAHuggingFaceEmbeddings     /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]     /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]     /export/anaconda3/envs/langchainGLM6B/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html      from .autonotebook import tqdm as notebook_tqdm    INFO  2023-08-28 18:26:07,485-1d:     loading model config    llm device: cuda    embedding device: cuda    dir: /data/zhx/zhx/langchain-ChatGLM_new    flagging username: e2fc35b8e87c4de18d692e951a5f7c46        True    Loading checkpoint shards: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:06<00:00,  1.01it/s]  query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n") query = "‰Ω†Â•Ω!"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")      Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ         Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ         Human: ‰Ω†Â•Ω!    ChatGLM:‰Ω†Â•ΩüëãÔºÅÊàëÊòØ‰∫∫Â∑•Êô∫ËÉΩÂä©Êâã ChatGLM2-6BÔºåÂæàÈ´òÂÖ¥ËßÅÂà∞‰Ω†ÔºåÊ¨¢ËøéÈóÆÊàë‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ        Human: ‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞ÅÂ≠¶‰ºö‰∫ÜÂêó?    ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçÊ≠•‰ºêÔºåÊúÄÊó©Âá∫Ëá™‰∫é„ÄäÂÄöÂ§©Â±†ÈæôËÆ∞„Äã„ÄÇÂú®Â∞èËØ¥‰∏≠ÔºåÁÅ≠ÁªùÂ∏àÂ§™ÊõæÂõ†‰∏éÁªÉ‰π†ÂáåÊ≥¢ÂæÆÊ≠•ÁöÑÊù®ËøáÁöÑÊÅ©ÊÄ®Á∫†ËëõÔºåËÄåÁïô‰∏ã‰∫Ü‰∏ÄÈÉ®Áªè‰π¶ÔºåÂÜÖÂÆπÊòØËÆ∞ËΩΩÂáåÊ≥¢ÂæÆÊ≠•ÁöÑËµ∑Ê∫êÂíå‰ΩúÁî®„ÄÇÂêéÊù•ÔºåÂáåÊ≥¢ÂæÆÊ≠•‰æøÊàê‰∏∫Êù®ËøáÂíåÂ∞èÈæôÂ•≥ÁöÑÊÑüÊÉÖË±°ÂæÅ„ÄÇÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÂè•Âè£Âè∑ÔºåÊòØÊ∏ÖÂçéÂ§ßÂ≠¶Â≠¶ÁîüÁ§æÂõ¢‚ÄúÊ®°ÂûãÁ§æ‚ÄùÁöÑÁ§æËÆ≠„ÄÇ      # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path) # Add your local knowledge filesfile_path = "/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt"#Your local file path"loader = TextLoader(file_path,encoding="utf-8")documents = loader.load()# split text into sentences and embedding the sentencestext_splitter = RecursiveCharacterTextSplitter(    chunk_size=500, chunk_overlap=100)texts = text_splitter.split_documents(documents)#your model pathembedding_path = '/data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese'embeddings = HuggingFaceEmbeddings(model_name=embedding_path)      INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda     INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda     INFO  2023-08-28 18:27:36,037-1d: Load pretrained SentenceTransformer: /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese    WARNING 2023-08-28 18:27:36,038-1d: No sentence-transformers model found with name /data/zhx/zhx/langchain-ChatGLM_new/text2vec/text2vec-large-chinese. Creating a new one with MEAN pooling.    INFO  2023-08-28 18:27:38,936-1d: Use pytorch device: cuda  #first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name") #first add your document into vearch vectorstorevearch_db = VearchDb.from_documents(texts,embeddings,table_name="your_table_name",metadata_path="/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/your_table_name")      Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00,  4.56it/s]    ['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed', '9a640124fc324a8abb0eaa31acb638b7']      res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n") res=vearch_db.similarity_search(query, 3)query = "‰Ω†Áü•ÈÅìÂáåÊ≥¢ÂæÆÊ≠•ÂêóÔºå‰Ω†Áü•ÈÅìÈÉΩÊúâË∞Å‰ºöÂáåÊ≥¢ÂæÆÊ≠•?"for idx,tmp in enumerate(res):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")# combine your local knowleadge and query context = "".join([tmp.page_content for tmp in res])new_query = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query}\n\n"response, history = model.chat(tokenizer, new_query, history=[])print(f"********ChatGLM:{response}\n")      Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 22.49it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        ÂçàÈ•≠ËøáÂêéÔºåÊÆµË™âÂèàÁªÉ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÔºåËµ∞‰∏ÄÊ≠•ÔºåÂê∏‰∏ÄÂè£Ê∞îÔºåËµ∞Á¨¨‰∫åÊ≠•Êó∂Â∞ÜÊ∞îÂëºÂá∫ÔºåÂÖ≠ÂçÅÂõõÂç¶Ëµ∞ÂÆåÔºåÂõõËÇ¢ÂÖ®Êó†È∫ªÁóπ‰πãÊÑüÔºåÊñôÊÉ≥ÂëºÂê∏È°∫ÁïÖÔºå‰æøÊó†ÂÆ≥Â§Ñ„ÄÇÁ¨¨‰∫åÊ¨°ÂÜçËµ∞Êó∂ËøûËµ∞‰∏§Ê≠•Âê∏‰∏ÄÂè£Ê∞îÔºåÂÜçËµ∞‰∏§Ê≠•ÂßãË°åÂëºÂá∫„ÄÇËøô‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊòØ‰ª•Âä®Âäü‰øÆ‰π†ÂÜÖÂäüÔºåËÑöÊ≠•Ë∏èÈÅçÂÖ≠ÂçÅÂõõÂç¶‰∏Ä‰∏™Âë®Â§©ÔºåÂÜÖÊÅØËá™ÁÑ∂ËÄåÁÑ∂Âú∞‰πüËΩ¨‰∫Ü‰∏Ä‰∏™Âë®Â§©„ÄÇÂõ†Ê≠§‰ªñÊØèËµ∞‰∏ÄÈÅçÔºåÂÜÖÂäõ‰æøÊúâ‰∏ÄÂàÜËøõÁõä„ÄÇ        ËøôËà¨ÁªÉ‰∫ÜÂá†Â§©Ôºå‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂ∑≤Ëµ∞ÂæóÈ¢á‰∏∫Á∫ØÁÜüÔºå‰∏çÈ°ªÂÜçÊï∞ÂëºÂê∏ÔºåÁ∫µÁÑ∂ÁñæË°åÔºåÊ∞îÊÅØ‰πüÂ∑≤Êó†ÊâÄÁ™íÊªû„ÄÇÂøÉÊÑèÊó¢ÁïÖÔºåË∑®Ê≠•Êó∂Ê∏êÊ∏êÊÉ≥Âà∞„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õ‰∏é‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÊúâÂÖ≥ÁöÑÂè•Â≠êÔºö‚Äú‰ªø‰ΩõÂÖÆËã•ËΩª‰∫ë‰πãËîΩÊúàÔºåÈ£òÈ£òÂÖÆËã•ÊµÅÈ£é‰πãÂõûÈõ™‚ÄùÔºå‚ÄúÁ´¶ËΩªË∫Ø‰ª•Èπ§Á´ãÔºåËã•Â∞ÜÈ£ûËÄåÊú™Áøî‚ÄùÔºå‚Äú‰ΩìËøÖÈ£ûÂá´ÔºåÈ£òÂøΩËã•Á•û‚ÄùÔºå‚ÄúÂä®Êó†Â∏∏ÂàôÔºåËã•Âç±Ëã•ÂÆâ„ÄÇËøõÊ≠¢ÈöæÊúüÔºåËã•ÂæÄËã•Ëøò‚Äù„ÄÇ                ÁôæÂ∫¶ÁÆÄ‰ªã        ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ„ÄåÈÄçÈÅ•Ê¥æ„ÄçÁã¨Èó®ËΩªÂäüË∫´Ê≥ïÔºåÁ≤æÂ¶ôÂºÇÂ∏∏„ÄÇ        ÂáåÊ≥¢ÂæÆÊ≠•‰πÉÊòØ‰∏ÄÈó®ÊûÅ‰∏ä‰πòÁöÑËΩªÂäüÔºåÊâÄ‰ª•Âàó‰∫éÂç∑ËΩ¥‰πãÊú´Ôºå‰ª•ÊòìÁªèÂÖ´ÂÖ´ÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºå‰ΩøÁî®ËÄÖÊåâÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÊ≠§Ê≠•Ê≥ïÁ≤æÂ¶ôÂºÇÂ∏∏ÔºåÂéüÊòØË¶ÅÂæÖ‰∫∫ÁªÉÊàê„ÄåÂåóÂÜ•Á•ûÂäü„ÄçÔºåÂê∏‰∫∫ÂÜÖÂäõÔºåËá™Ë∫´ÂÜÖÂäõÂ∑≤„ÄêÈ¢á‰∏∫Ê∑±Âéö„Äë‰πãÂêéÂÜçÁªÉ„ÄÇ        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü        Âç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ        Âç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        „ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé        ÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ        Â∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù        ÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù    Âç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ        ********ChatGLM:ÂáåÊ≥¢ÂæÆÊ≠•ÊòØ‰∏ÄÁßçËΩªÂäüË∫´Ê≥ïÔºåÂ±û‰∫éÈÄçÈÅ•Ê¥æÁã¨Èó®ËΩªÂäü„ÄÇÂÆÉ‰ª•„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÂÖ≠ÂçÅÂõõÂç¶‰∏∫Âü∫Á°ÄÔºåÊåâÁÖßÁâπÂÆöÈ°∫Â∫èË∏èÁùÄÂç¶Ë±°Êñπ‰ΩçË°åËøõÔºå‰ªéÁ¨¨‰∏ÄÊ≠•Âà∞ÊúÄÂêé‰∏ÄÊ≠•Ê≠£Â•ΩË°åËµ∞‰∏Ä‰∏™Â§ßÂúà„ÄÇÂáåÊ≥¢ÂæÆÊ≠•Á≤æÂ¶ôÂºÇÂ∏∏ÔºåÂèØ‰ª•ËÆ©‰∫∫ÂÜÖÂäõÁõ∏Âä©ÔºåËá™Ë∫´ÂÜÖÂäõÈ¢á‰∏∫Ê∑±Âéö‰πãÂêéÂÜçÁªÉ„ÄÇ„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû‰∏≠ÊúâÊèèËø∞„ÄÇ      query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source) query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=history)print(f"Human: {query}\nChatGLM:{response}\n")vearch_info = ["Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®",              "Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì",              "vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö"]vearch_source=[{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'},{'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/tlbb/three_body.txt'}]vearch_db.add_texts(vearch_info,vearch_source)      Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']     Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']     Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:ÊòØÁöÑÔºåÊàëÁü•ÈÅì Vearch„ÄÇVearch ÊòØ‰∏ÄÁßçÁü©ÈòµÂàÜËß£ techniqueÔºåÁî®‰∫éÂ∞ÜÁü©ÈòµÂàÜËß£‰∏∫Ëã•Âπ≤‰∏™‰∏çÂèØÁ∫¶Áü©ÈòµÁöÑ‰πòÁßØ„ÄÇÂÆÉÊòØÁî± Linus Torvalds ÂºÄÂèëÁöÑÔºåÊó®Âú®ÊèêÈ´ò Linux ÂÜÖÊ†∏‰∏≠Áü©ÈòµÊìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇ        Vearch ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®ÁâπÊÆäÁöÑÊìç‰ΩúÊù•ÂØπÁü©ÈòµËøõË°åÊìç‰ΩúÔºå‰ªéËÄåÈÅøÂÖç‰∫Ü‰ΩøÁî®ÊòÇË¥µÁöÑÁü©ÈòµÊìç‰ΩúÂ∫ì„ÄÇÂÆÉ‰πüË¢´ÂπøÊ≥õÁî®‰∫éÂÖ∂‰ªñÊìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÂ¶Ç FreeBSD Âíå Solaris„ÄÇ        Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 31.59it/s]    ['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b']        ['04bc84fff5074b7b8990441e92e6df07',     'e221906153bb4e03bc7095dadea144de',     '126034ba51934093920d8732860f340b']  query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n") query3 = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"res1 = vearch_db.similarity_search(query3, 3)for idx,tmp in enumerate(res1):     print(f"{'#'*20}Á¨¨{idx+1}ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£{'#'*20}\n\n{tmp.page_content}\n")context1 = "".join([tmp.page_content for tmp in res1])new_query1 = f"Âü∫‰∫é‰ª•‰∏ã‰ø°ÊÅØÔºåÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÊù•ÂõûÁ≠îÁî®Êà∑ÁöÑÈóÆÈ¢ò„ÄÇËÉåÊôØ‰ø°ÊÅØ:\n {context1} \n ÂõûÁ≠îÁî®Êà∑Ëøô‰∏™ÈóÆÈ¢ò:{query3}\n\n"response, history = model.chat(tokenizer, new_query1, history=[])print(f"***************ChatGLM:{response}\n")      Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ         Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:00<00:00, 25.57it/s]    ####################Á¨¨1ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊòØ‰∏ÄÊ¨æÂ≠òÂÇ®Â§ßËØ≠Ë®ÄÊ®°ÂûãÊï∞ÊçÆÁöÑÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáèÔºåÂèØÁî®‰∫éÂü∫‰∫é‰∏™‰∫∫Áü•ËØÜÂ∫ìÁöÑÂ§ßÊ®°ÂûãÂ∫îÁî®        ####################Á¨¨2ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        Vearch ÊîØÊåÅOpenAI, Llama, ChatGLMÁ≠âÊ®°ÂûãÔºå‰ª•ÂèäLangChainÂ∫ì        ####################Á¨¨3ÊÆµÁõ∏ÂÖ≥ÊñáÊ°£####################        vearch ÊòØÂü∫‰∫éCËØ≠Ë®Ä,goËØ≠Ë®ÄÂºÄÂèëÁöÑÔºåÂπ∂Êèê‰æõpythonÊé•Âè£ÔºåÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö        ***************ChatGLM:ÊòØÁöÑÔºåVarchÊòØ‰∏Ä‰∏™ÂêëÈáèÊï∞ÊçÆÂ∫ìÔºåÊó®Âú®Â≠òÂÇ®ÂíåÂø´ÈÄüÊêúÁ¥¢Ê®°ÂûãembeddingÂêéÁöÑÂêëÈáè„ÄÇÂÆÉÊîØÊåÅOpenAI„ÄÅLlamaÂíåChatGLMÁ≠âÊ®°ÂûãÔºåÂπ∂ÂèØ‰ª•Áõ¥Êé•ÈÄöËøápipÂÆâË£Ö„ÄÇVarchÊòØ‰∏Ä‰∏™Âü∫‰∫éCËØ≠Ë®ÄÂíåGoËØ≠Ë®ÄÂºÄÂèëÁöÑÈ°πÁõÆÔºåÂπ∂Êèê‰æõ‰∫ÜPythonÊé•Âè£„ÄÇ      ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc) ##delete and get function need to maintian  docids ##your docidres_d=vearch_db.delete(['04bc84fff5074b7b8990441e92e6df07', 'e221906153bb4e03bc7095dadea144de', '126034ba51934093920d8732860f340b'])print("delete docid",res_d)query = "‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?"response, history = model.chat(tokenizer, query, history=[])print(f"Human: {query}\nChatGLM:{response}\n")get_id_doc=vearch_db.get(['04bc84fff5074b7b8990441e92e6df07'])print("after delete docid to query again:",get_id_doc)get_delet_doc=vearch_db.get(['7aae36236f784105a0004d8ff3c7c3ad', '7e495d4e5962497db2080e84d52e75ed'])print("get existed docid",get_delet_doc)      delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}     delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}     delete docid True    Human: ‰Ω†Áü•ÈÅìvearchÊòØ‰ªÄ‰πàÂêó?    ChatGLM:VearchÊòØ‰∏ÄÁßçÈ´òÂàÜÂ≠êÂåñÂêàÁâ©,‰πüÁß∞‰∏∫ËÅöÂêàÁâ©„ÄÅÈ´òÂàÜÂ≠êÊùêÊñôÊàñÂêàÊàêÊùêÊñô„ÄÇÂÆÉÊòØÁî±ÈáçÂ§çÂçïÂÖÉÁªÑÊàêÁöÑÂ§ßÂûãËÅöÂêàÁâ©,ÈÄöÂ∏∏Áî±‰∏Ä‰∫õÈáçÂ§çÂçïÂÖÉÁªÑÊàê,Ëøô‰∫õÂçïÂÖÉÂú®ËÅöÂêàËøáÁ®ã‰∏≠ÁªìÂêàÂú®‰∏ÄËµ∑ÂΩ¢Êàê‰∏Ä‰∏™ËøûÁª≠ÁöÑÈ´òÂàÜÂ≠êÈìæ„ÄÇ        VearchÂÖ∑ÊúâËÆ∏Â§öÁã¨ÁâπÁöÑÊÄßË¥®,‰æãÂ¶ÇÈ´òÂº∫Â∫¶„ÄÅÈ´òÂàöÊÄß„ÄÅËÄêÁ£®„ÄÅËÄêËÖêËöÄ„ÄÅËÄêÈ´òÊ∏©Á≠â„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏Áî®‰∫éÂà∂ÈÄ†ÂêÑÁßçÂ∫îÁî®,‰æãÂ¶ÇÂ°ëÊñôÂà∂ÂìÅ„ÄÅÊ©°ËÉ∂„ÄÅÁ∫§Áª¥„ÄÅÂª∫Á≠ëÊùêÊñôÁ≠â„ÄÇ        after delete docid to query again: {}    get existed docid {'7aae36236f784105a0004d8ff3c7c3ad': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫åÂõû ÁéâÂ£ÅÊúàÂçéÊòé\n\nÂÜçÂ±ïÂ∏õÂç∑ÔºåÈïøÂç∑‰∏äÊ∫êÊ∫êÁöÜÊòØË£∏Â•≥ÁîªÂÉèÔºåÊàñÁ´ãÊàñÂçßÔºåÊàñÁé∞ÂâçËÉ∏ÔºåÊàñËßÅÂêéËÉå„ÄÇ‰∫∫ÂÉèÁöÑÈù¢ÂÆπÈÉΩÊòØ‰∏ÄËà¨Ôºå‰ΩÜÊàñÂñúÊàñÊÑÅÔºåÊàñÂê´ÊÉÖÂáùÁú∏ÔºåÊàñËΩªÂóîËñÑÊÄíÔºåÁ•ûÊÉÖÂêÑÂºÇ„ÄÇ‰∏ÄÂÖ±Êúâ‰∏âÂçÅÂÖ≠ÂπÖÂõæÂÉèÔºåÊØèÂπÖÂÉè‰∏äÂùáÊúâÈ¢úËâ≤ÁªÜÁ∫øÔºåÊ≥®ÊòéÁ©¥ÈÅìÈÉ®‰ΩçÂèäÁªÉÂäüÊ≥ïËØÄ„ÄÇ\n\nÂ∏õÂç∑Â∞ΩÂ§ÑÈ¢òÁùÄ‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÂõõÂ≠óÔºåÂÖ∂ÂêéÁªòÁöÑÊòØÊó†Êï∞Ë∂≥Âç∞ÔºåÊ≥®Êòé‚ÄúÂ¶áÂ¶π‚Äù„ÄÅ‚ÄúÊó†Â¶Ñ‚ÄùÁ≠âÁ≠âÂ≠óÊ†∑ÔºåÂ∞ΩÊòØ„ÄäÊòìÁªè„Äã‰∏≠ÁöÑÊñπ‰Ωç„ÄÇÊÆµË™âÂâçÂá†Êó•ËøòÊ≠£ÂÖ®ÂøÉÂÖ®ÊÑèÂú∞ÈíªÁ†î„ÄäÊòìÁªè„ÄãÔºå‰∏ÄËßÅÂà∞Ëøô‰∫õÂêçÁß∞ÔºåÁôªÊó∂Á≤æÁ•ûÂ§ßÊåØÔºå‰æø‰ººÈÅáÂà∞ÊïÖ‰∫§ËâØÂèã‰∏ÄËà¨„ÄÇÂè™ËßÅË∂≥Âç∞ÂØÜÂØÜÈ∫ªÈ∫ªÔºå‰∏çÁü•ÊúâÂá†ÂçÉÁôæ‰∏™ÔºåËá™‰∏Ä‰∏™Ë∂≥Âç∞Ëá≥Âè¶‰∏Ä‰∏™Ë∂≥Âç∞ÂùáÊúâÁªøÁ∫øË¥Ø‰∏≤ÔºåÁ∫ø‰∏äÁªòÊúâÁÆ≠Â§¥ÔºåÊúÄÂêéÂÜôÁùÄ‰∏ÄË°åÂ≠óÈÅìÔºö‚ÄúÊ≠•Ê≥ïÁ•ûÂ¶ôÔºå‰øùË∫´ÈÅøÊïåÔºåÂæÖÁßØÂÜÖÂäõÔºåÂÜçÂèñÊïåÂëΩ„ÄÇ‚Äù\n\nÊÆµË™âÂøÉÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÊâÄÈÅóÁöÑÊ≠•Ê≥ïÔºåÂøÖÂÆöÁ≤æÂ¶ô‰πãÊûÅÔºåÈÅáÂà∞Âº∫ÊïåÊó∂ËÑ±Ë∫´ÈÄÉËµ∞ÔºåÈÇ£Â∞±ÂæàÂ•ΩÔºå‚ÄòÂÜçÂèñÊïåÂëΩ‚Äô‰πüÂ∞±‰∏çÂøÖ‰∫Ü„ÄÇ‚Äù\nÂç∑Â•ΩÂ∏õÂç∑ÔºåÂØπ‰πã‰Ωú‰∫Ü‰∏§‰∏™ÊèñÔºåÁèçËÄåÈáç‰πãÂú∞Êè£ÂÖ•ÊÄÄ‰∏≠ÔºåËΩ¨Ë∫´ÂØπÈÇ£ÁéâÂÉèÈÅìÔºö‚ÄúÁ•û‰ªôÂßäÂßäÔºå‰Ω†Âê©ÂíêÊàëÊúùÂçàÊôö‰∏âÊ¨°ÁªÉÂäüÔºåÊÆµË™â‰∏çÊï¢ÊúâËøù„ÄÇ‰ªäÂêéÊàëÂØπ‰∫∫Âä†ÂÄçÂÆ¢Ê∞îÔºåÂà´‰∫∫‰∏ç‰ºöÊù•ÊâìÊàëÔºåÊàëËá™ÁÑ∂‰πü‰∏ç‰ºöÂéªÂê∏‰ªñÂÜÖÂäõ„ÄÇ‰Ω†ËøôÂ•ó‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÊàëÊõ¥Ë¶ÅÁî®ÂøÉÁªÉÁÜüÔºåÁúºËßÅ‰∏çÂØπÔºåÁ´ãÂàªÊ∫ú‰πãÂ§ßÂêâÔºåÂ∞±Âê∏‰∏çÂà∞‰ªñÂÜÖÂäõ‰∫Ü„ÄÇ‚ÄùËá≥‰∫é‚ÄúÊùÄÂ∞ΩÊàëÈÄçÈÅ•Ê¥æÂºüÂ≠ê‚Äù‰∏ÄËäÇÔºåÂç¥ÊÉ≥‰πü‰∏çÊï¢ÂéªÊÉ≥„ÄÇ', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'}), '7e495d4e5962497db2080e84d52e75ed': Document(page_content='„ÄäÂ§©ÈæôÂÖ´ÈÉ®„ÄãÁ¨¨‰∫îÂõû ÂæÆÊ≠•Á∏†Á∫πÁîü\n\nÂç∑ËΩ¥‰∏≠Ê≠§Â§ñËØ∏ÁßçÁªèËÑâ‰øÆ‰π†‰πãÊ≥ïÁîöÂ§öÔºåÁöÜÊòØÂèñ‰∫∫ÂÜÖÂäõÁöÑÊ≥ïÈó®ÔºåÊÆµË™âËôΩËá™ËØ≠ÂÆΩËß£ÔºåÊÄªËßâ‰π†‰πãÊúâËøùÊú¨ÊÄßÔºåÂçïÊòØË¥™Â§öÂä°ÂæóÔºå‰æøÈùûÂ•Ω‰∫ãÔºåÂΩì‰∏ãÊöÇ‰∏çÁêÜ‰ºö„ÄÇ\n\nÂç∑Âà∞Âç∑ËΩ¥Êú´Á´ØÔºåÂèàËßÅÂà∞‰∫Ü‚ÄúÂáåÊ≥¢ÂæÆÊ≠•‚ÄùÈÇ£ÂõõÂ≠óÔºåÁôªÊó∂‰æøÊÉ≥Ëµ∑„ÄäÊ¥õÁ•ûËµã„Äã‰∏≠ÈÇ£‰∫õÂè•Â≠êÊù•Ôºö‚ÄúÂáåÊ≥¢ÂæÆÊ≠•ÔºåÁΩóË¢úÁîüÂ∞ò‚Ä¶‚Ä¶ËΩ¨ÁúÑÊµÅÁ≤æÔºåÂÖâÊ∂¶ÁéâÈ¢ú„ÄÇÂê´ËæûÊú™ÂêêÔºåÊ∞îËã•ÂπΩÂÖ∞„ÄÇÂçéÂÆπÂ©ÄÂ®úÔºå‰ª§ÊàëÂøòÈ§ê„ÄÇ‚ÄùÊõπÂ≠êÂª∫ÈÇ£‰∫õÂçÉÂè§ÂêçÂè•ÔºåÂú®ËÑëÊµ∑‰∏≠ÁºìÁºìÊµÅËøáÔºö‚ÄúÁßæÁ∫§ÂæóË°∑Ôºå‰øÆÁü≠ÂêàÂ∫¶ÔºåËÇ©Ëã•ÂâäÊàêÔºåËÖ∞Â¶ÇÁ∫¶Á¥†„ÄÇÂª∂È¢àÁßÄÈ°πÔºåÁöìË¥®ÂëàÈú≤„ÄÇËä≥Ê≥ΩÊó†Âä†ÔºåÈìÖÂçéÂºóÂæ°„ÄÇ‰∫ëÈ´ªÂ≥®Â≥®Ôºå‰øÆÁúâËøûÂ®ü„ÄÇ‰∏πÂîáÂ§ñÊúóÔºåÁöìÈΩøÂÜÖÈ≤ú„ÄÇÊòéÁú∏ÂñÑÁùêÔºåÈù•ËæÖÊâøÊùÉ„ÄÇÁë∞ÂßøËâ≥ÈÄ∏Ôºå‰ª™Èùô‰ΩìÈó≤„ÄÇÊüîÊÉÖÁª∞ÊÄÅÔºåÂ™ö‰∫éËØ≠Ë®Ä‚Ä¶‚Ä¶‚ÄùËøô‰∫õÂè•Â≠êÁî®Âú®Êú®Â©âÊ∏ÖË∫´‰∏äÔºå‚ÄúËøôËØùÂÄí‰πüÊúâÁêÜ‚ÄùÔºõ‰ΩÜÂ¶ÇÁî®‰πã‰∫éÁ•û‰ªôÂßäÂßäÔºåÂè™ÊÄïÊõ¥‰∏∫ÈÄÇÂêà„ÄÇÊÉ≥Âà∞Á•û‰ªôÂßäÂßäÁöÑÂßøÂÆπ‰ΩìÊÄÅÔºå‚ÄúÁöéËã•Â§™Èò≥ÂçáÊúùÈúûÔºåÁÅºËã•ËäôËìâÂá∫ÁªøÊ≥¢‚ÄùÔºå‰ΩÜËßâ‰æùÂ•πÂê©ÂíêË°å‰∫ãÔºåÂÆû‰∏∫‰∫∫ÁîüËá≥‰πêÔºåÂøÉÊÉ≥Ôºö‚ÄúÊàëÂÖàÊù•ÁªÉËøô‚ÄòÂáåÊ≥¢ÂæÆÊ≠•‚ÄôÔºåÊ≠§‰πÉÈÄÉÂëΩ‰πãÂ¶ôÊ≥ïÔºåÈùûÂÆ≥‰∫∫‰πãÊâãÊÆµ‰πüÔºåÁªÉ‰πãÊúâÁôæÂà©ËÄåÊó†‰∏ÄÂÆ≥„ÄÇ‚Äù', metadata={'source': '/data/zhx/zhx/langchain-ChatGLM_new/knowledge_base/Â§©ÈæôÂÖ´ÈÉ®/lingboweibu.txt'})}  Previous USearch Next Vectara CommunityDiscordTwitterGitHubPythonJS/TSMoreHomepageBlogCopyright ¬© 2023 LangChain, Inc. CommunityDiscordTwitterGitHubPythonJS/TSMoreHomepageBlog CommunityDiscordTwitter Community GitHubPythonJS/TS GitHub MoreHomepageBlog More Copyright ¬© 2023 LangChain, Inc. Copyright ¬© 2023 LangChain, Inc. Skip to main content (#docusaurus_skipToContent_fallback) ü¶úÔ∏èüîó LangChain (/) Docs (/docs/get_started/introduction) Use cases (/docs/use_cases) Integrations (/docs/integrations) API (https://api.python.langchain.com) LangSmith (https://smith.langchain.com) JS/TS Docs (https://js.langchain.com/docs)  (https://github.com/hwchase17/langchain) Integrations (/docs/integrations) Callbacks (/docs/integrations/callbacks/) Chat models (/docs/integrations/chat/) Chat loaders (/docs/integrations/chat_loaders/) Document loaders (/docs/integrations/document_loaders/) Document transformers (/docs/integrations/document_transformers/) LLMs (/docs/integrations/llms/) Memory (/docs/integrations/memory/) Retrievers (/docs/integrations/retrievers/) Text embedding models (/docs/integrations/text_embedding/) Agents & Toolkits (/docs/integrations/toolkits/) Tools (/docs/integrations/tools/) Vector stores (/docs/integrations/vectorstores/) Activeloop Deep Lake (/docs/integrations/vectorstores/activeloop_deeplake) Alibaba Cloud OpenSearch (/docs/integrations/vectorstores/alibabacloud_opensearch) AnalyticDB (/docs/integrations/vectorstores/analyticdb) Annoy (/docs/integrations/vectorstores/annoy) Atlas (/docs/integrations/vectorstores/atlas) AwaDB (/docs/integrations/vectorstores/awadb) Azure Cognitive Search (/docs/integrations/vectorstores/azuresearch) BagelDB (/docs/integrations/vectorstores/bageldb) Cassandra (/docs/integrations/vectorstores/cassandra) Chroma (/docs/integrations/vectorstores/chroma) ClickHouse (/docs/integrations/vectorstores/clickhouse) DashVector (/docs/integrations/vectorstores/dashvector) Dingo (/docs/integrations/vectorstores/dingo) DocArray HnswSearch (/docs/integrations/vectorstores/docarray_hnsw) DocArray InMemorySearch (/docs/integrations/vectorstores/docarray_in_memory) Elasticsearch (/docs/integrations/vectorstores/elasticsearch) Epsilla (/docs/integrations/vectorstores/epsilla) Faiss (/docs/integrations/vectorstores/faiss) Hologres (/docs/integrations/vectorstores/hologres) LanceDB (/docs/integrations/vectorstores/lancedb) Marqo (/docs/integrations/vectorstores/marqo) Google Vertex AI MatchingEngine (/docs/integrations/vectorstores/matchingengine) Meilisearch (/docs/integrations/vectorstores/meilisearch) Milvus (/docs/integrations/vectorstores/milvus) MongoDB Atlas (/docs/integrations/vectorstores/mongodb_atlas) MyScale (/docs/integrations/vectorstores/myscale) Neo4j Vector Index (/docs/integrations/vectorstores/neo4jvector) NucliaDB (/docs/integrations/vectorstores/nucliadb) OpenSearch (/docs/integrations/vectorstores/opensearch) Postgres Embedding (/docs/integrations/vectorstores/pgembedding) PGVector (/docs/integrations/vectorstores/pgvector) Pinecone (/docs/integrations/vectorstores/pinecone) Qdrant (/docs/integrations/vectorstores/qdrant) Redis (/docs/integrations/vectorstores/redis) Rockset (/docs/integrations/vectorstores/rockset) ScaNN (/docs/integrations/vectorstores/scann) SingleStoreDB (/docs/integrations/vectorstores/singlestoredb) scikit-learn (/docs/integrations/vectorstores/sklearn) sqlite-vss (/docs/integrations/vectorstores/sqlitevss) StarRocks (/docs/integrations/vectorstores/starrocks) Supabase (Postgres) (/docs/integrations/vectorstores/supabase) Tair (/docs/integrations/vectorstores/tair) Tencent Cloud VectorDB (/docs/integrations/vectorstores/tencentvectordb) Tigris (/docs/integrations/vectorstores/tigris) Typesense (/docs/integrations/vectorstores/typesense) USearch (/docs/integrations/vectorstores/usearch) vearch (/docs/integrations/vectorstores/vearch) Vectara (/docs/integrations/vectorstores/vectara) Weaviate (/docs/integrations/vectorstores/weaviate) Xata (/docs/integrations/vectorstores/xata) Zep (/docs/integrations/vectorstores/zep) Zilliz (/docs/integrations/vectorstores/zilliz) Grouped by provider (/docs/integrations/providers/)  (/) Integrations (/docs/integrations) Vector stores (/docs/integrations/vectorstores/) RecursiveCharacterTextSplitter (https://api.python.langchain.com/en/latest/text_splitter/langchain.text_splitter.RecursiveCharacterTextSplitter.html) VearchDb (https://api.python.langchain.com/en/latest/vectorstores/langchain.vectorstores.vearch.VearchDb.html) TextLoader (https://api.python.langchain.com/en/latest/document_loaders/langchain.document_loaders.text.TextLoader.html) PromptTemplate (https://api.python.langchain.com/en/latest/prompts/langchain.prompts.prompt.PromptTemplate.html) RetrievalQA (https://api.python.langchain.com/en/latest/chains/langchain.chains.retrieval_qa.base.RetrievalQA.html) HuggingFaceEmbeddings (https://api.python.langchain.com/en/latest/embeddings/langchain.embeddings.huggingface.HuggingFaceEmbeddings.html) PreviousUSearch (/docs/integrations/vectorstores/usearch) NextVectara (/docs/integrations/vectorstores/vectara) Discord (https://discord.gg/cU2adEyC7w) Twitter (https://twitter.com/LangChainAI) Python (https://github.com/hwchase17/langchain) JS/TS (https://github.com/hwchase17/langchainjs) Homepage (https://langchain.com) Blog (https://blog.langchain.dev)